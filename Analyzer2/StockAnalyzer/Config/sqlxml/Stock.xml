<?xml version="1.0" encoding="UTF-8" ?>
<sqlMap namespace="StockData"
xmlns="http://ibatis.apache.org/mapping"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
  <!--Type aliases allow you to use a shorter name for long fully qualified class names.-->
  <alias>
    <typeAlias alias="StockData" type="FinanceAnalyzer.DB.StockData" />
  </alias>
  <resultMaps>
    <resultMap id="SelectAllResult" class="StockData">
      <result property="Id" column="STOCKID" />
      <result property="TradeDate" column="TRADEDATE" />
      <result property="StartPrice" column="STARTPRICE" />
      <result property="EndPrice" column="ENDPRICE" />
      <result property="MaxPrice" column="MAXPRICE" />
      <result property="MinPrice" column="MINPRICE" />
      <result property="VolumeHand" column="VOLUMEHAND" />
      <result property="Amount" column="AMOUNT" />
    </resultMap>
  </resultMaps>

  <statements>
    <insert id="InsertStock" parameterClass="StockData">
      INSERT INTO [T_Stocks]
      (STOCKID, TRADEDATE, STARTPRICE, ENDPRICE, MAXPRICE, MINPRICE, VOLUMEHAND, AMOUNT)
      VALUES
      (#Id#, #TradeDate#, #StartPrice#, #EndPrice#, #MaxPrice#, #MinPrice#, #VolumeHand#, #Amount#)
    </insert>

    <select id="SelectAllStock" resultMap="SelectAllResult">
      SELECT
      STOCKID,
      TRADEDATE,
      STARTPRICE,
      ENDPRICE,
      MAXPRICE,
      MINPRICE,
      VOLUMEHAND,
      AMOUNT
      from T_Stocks
    </select>

    <select id="SelectStockByStockId" parameterClass="int" resultMap="SelectAllResult">
      SELECT
      STOCKID,
      TRADEDATE,
      STARTPRICE,
      ENDPRICE,
      MAXPRICE,
      MINPRICE,
      VOLUMEHAND,
      AMOUNT
      from T_Stocks
      <dynamic prepend="WHERE">
        <isParameterPresent>
          STOCKID = #value#
        </isParameterPresent>
      </dynamic>
    </select>

    <select id="selectItemCount" resultClass="int">
      SELECT DISTINCT STOCKID FROM T_Stocks
    </select>

  </statements>
</sqlMap>
